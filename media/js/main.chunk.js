(this.webpackJsonpreactapp=this.webpackJsonpreactapp||[]).push([[0],{107:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(13),o=n.n(r),s=(n(57),n(16)),l=n.n(s),i=n(26),d=n(6),u=n(33),j=(n(84),n(85),n(86),n(28)),h="http://127.0.0.1:8000/api/",p=n(27),b=n.n(p),f=n(109),O=n(1),m=function(e){var t=e.show,n=e.handleClose,a=e.handleDelete;return Object(O.jsxs)(f.a,{show:t,onHide:n,children:[Object(O.jsx)(f.a.Header,{closeButton:!0,children:Object(O.jsx)(f.a.Title,{children:"Confirmation"})}),Object(O.jsx)(f.a.Body,{children:"Are you sure to delete consultant?"}),Object(O.jsxs)(f.a.Footer,{children:[Object(O.jsx)(j.a,{variant:"secondary",onClick:n,children:"Close"}),Object(O.jsx)(j.a,{variant:"danger",onClick:a,children:"Delete"})]})]})},v=n(110),g=n(50),x=n(111),C=function(e){var t=e.show,n=e.handleClose,c=e.handleAdd,r=e.rowData,o=Object(a.useState)(!1),s=Object(d.a)(o,2),l=s[0],i=s[1];return Object(O.jsxs)(f.a,{show:t,onHide:n,children:[Object(O.jsx)(f.a.Header,{closeButton:!0,children:Object(O.jsx)(f.a.Title,{children:"Add Consultant"})}),Object(O.jsx)(f.a.Body,{children:Object(O.jsxs)(v.a,{noValidate:!0,validated:l,onSubmit:function(e){var t=e.currentTarget;e.preventDefault(),e.stopPropagation(),t.checkValidity()&&c(),i(!0)},children:[r&&r.length>0&&Object.keys(r[0]).map((function(e){return"id"!==e&&Object(O.jsx)("div",{children:Object(O.jsxs)(v.a.Group,{as:g.a,md:"12",controlId:"validationCustomUsername",children:[Object(O.jsx)(v.a.Label,{children:e}),Object(O.jsxs)(x.a,{hasValidation:!0,children:[Object(O.jsx)(v.a.Control,{id:e,type:"consultant_start_date"===e||"proposed_end_date"===e?"date":"string",placeholder:"Enter ".concat(e),required:!0}),Object(O.jsx)(v.a.Control.Feedback,{type:"invalid",children:"Please enter ".concat(e)})]})]})})})),Object(O.jsx)(j.a,{className:"m-2",type:"submit",children:"Add"}),Object(O.jsx)(j.a,{className:"m-2",variant:"secondary",onClick:n,children:"Cancel"})]})})]})};var w=function(){var e,t=Object(a.useState)([]),n=Object(d.a)(t,2),c=n[0],r=n[1],o=Object(a.useState)({userGroup:"superUser"}),s=Object(d.a)(o,2),p=s[0],f=s[1],v={"X-CSRFToken":function(e){for(var t=e+"=",n=document.cookie.split(";"),a=0;a<n.length;a++){for(var c=n[a];" "===c.charAt(0);)c=c.substring(1,c.length);if(0===c.indexOf(t))return c.substring(t.length,c.length)}return null}("csrftoken")},g=Object(a.useState)(null),x=Object(d.a)(g,2),w=x[0],y=x[1],k=Object(a.useState)(null),S=Object(d.a)(k,2),E=(S[0],S[1]),A=Object(a.useState)(!1),D=Object(d.a)(A,2),G=D[0],B=D[1],I=Object(a.useState)(!1),N=Object(d.a)(I,2),T=N[0],L=N[1],F=Object(a.useState)(!1),H=Object(d.a)(F,2),R=H[0],V=H[1],_=function(){var e=Object(i.a)(l.a.mark((function e(){var t,n,a,c,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(h,"consultant/"));case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,console.log(n),a=window.sessionStorage.getItem("userGroup"),console.log("userGroup",a,"superUser"!==a),"superUser"!==a&&(c=a.split("_"),o=c&&c.length>0&&c[0],console.log("vendorName",a,o),n=n.filter((function(e){var t;return(null===e||void 0===e||null===(t=e.eda_vendor)||void 0===t?void 0:t.toLowerCase())===(null===o||void 0===o?void 0:o.toLowerCase())}))),r(n);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){f({userGroup:window.sessionStorage.getItem("userGroup")}),_(),console.log(window.sessionStorage.getItem("userGroup"))}),[]);var U=function(){V(!0)},M=function(){var e=Object(i.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},Object.keys(c[0]).forEach((function(e){"id"!==e&&(t[e]=document.getElementById(e)&&document.getElementById(e).value)})),e.next=4,b.a.post("".concat(h,"consultant/"),t,{headers:v});case 4:n=e.sent,console.log("update",n),201===n.status&&(V(!1),_());case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(i.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=w.getSelectedRows(),e.next=3,b.a.delete("".concat(h,"consultant/").concat(null===(t=n[0])||void 0===t?void 0:t.id),{headers:v});case 3:e.sent,_(),B(!1),L(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:"App",children:["superUser"===p.userGroup?Object(O.jsxs)("div",{children:[Object(O.jsx)(j.a,{variant:"primary",className:"m-2",onClick:U,children:"Add Consultant"}),T&&Object(O.jsx)(j.a,{variant:"danger",className:"m-2",onClick:function(){B(!0)},children:"Remove Consultant"}),Object(O.jsx)(j.a,{variant:"primary",className:"m-2",onClick:function(){w.exportDataAsCsv()},children:"Export to CSV"})]}):null,Object(O.jsx)(m,{show:G,handleClose:function(){return B(!1)},handleDelete:P,handleAdd:U}),Object(O.jsx)(C,{show:R,handleClose:function(){return V(!1)},handleAdd:M,rowData:c}),Object(O.jsx)("div",{className:"ag-theme-alpine",style:{width:"100%",height:"1000px"},children:Object(O.jsx)(u.AgGridReact,{components:{actionCellRenderer:function(e){var t=document.createElement("span"),n=document.createElement("button");n.innerHTML="Edit",n.className="btn btn-primary",n.onclick=function(){alert("Button is clicked")};var a=document.createElement("button"),c=e.api.getEditingCells().some((function(t){return t.rowIndex===e.node.rowIndex}));if(c){var r=document.createElement("button");r.innerHTML="Cancel",r.className="btn btn-secondary",r.onclick=function(){alert("Button is clicked")},n.innerHTML="Update"}return t.appendChild(n),c&&t.appendChild(a),t}},defaultColDef:{flex:1,minWidth:200,filter:!0,editable:!0},rowData:c,onGridReady:function(e){y(e.api),E(e.columnApi)},onCellValueChanged:function(e){console.log(e),console.log("onCellValueChanged: "+e.colDef.field+" = "+e.newValue),e.data.id&&b.a.put("".concat(h,"consultant/").concat(e.data.id,"/"),e.data,{headers:v})},rowSelection:"single",onSelectionChanged:function(){var e=w.getSelectedRows();e&&e.length>0&&L(!0)},suppressExcelExport:!0,children:c&&c.length>0&&(null===(e=Object.keys(c[0]))||void 0===e?void 0:e.map((function(e){return Object(O.jsx)(u.AgGridColumn,{field:e,pinned:"id"===e||"consultant_name"===e?"left":null})})))})})]})},y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,112)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))};n(106);o.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(w,{})}),document.getElementById("root")),y()},57:function(e,t,n){},86:function(e,t,n){}},[[107,1,2]]]);
//# sourceMappingURL=main.chunk.js.map