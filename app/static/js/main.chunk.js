(this.webpackJsonpreactapp=this.webpackJsonpreactapp||[]).push([[0],{107:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),l=t(13),i=t.n(l),r=(t(57),t(2)),d=t(14),c=t.n(d),s=t(17),u=t(6),v=t(32),j=(t(84),t(85),t(86),t(22)),m="http://127.0.0.1:8000/api/",h=t(46),p=t.n(h),b=t(109),g=t(1),f=function(e){var n=e.show,t=e.handleClose,a=e.handleDelete;return Object(g.jsxs)(b.a,{show:n,onHide:t,children:[Object(g.jsx)(b.a.Header,{closeButton:!0,children:Object(g.jsx)(b.a.Title,{children:"Confirmation"})}),Object(g.jsx)(b.a.Body,{children:"Are you sure to delete consultant?"}),Object(g.jsxs)(b.a.Footer,{children:[Object(g.jsx)(j.a,{variant:"secondary",onClick:t,children:"Close"}),Object(g.jsx)(j.a,{variant:"danger",onClick:a,children:"Delete"})]})]})},O=t(110),x=t(51),w=t(111),C=function(e){var n=e.show,t=e.handleClose,o=e.handleAdd,l=e.columns,i=Object(a.useState)(!1),r=Object(u.a)(i,2),d=r[0],c=r[1];return Object(g.jsxs)(b.a,{show:n,onHide:t,children:[Object(g.jsx)(b.a.Header,{closeButton:!0,children:Object(g.jsx)(b.a.Title,{children:"Add Consultant"})}),Object(g.jsx)(b.a.Body,{children:Object(g.jsxs)(O.a,{noValidate:!0,validated:d,onSubmit:function(e){var n=e.currentTarget;e.preventDefault(),e.stopPropagation(),n.checkValidity()&&o(),c(!0)},children:[l&&l.length>0&&l.map((function(e){return"id"!==(null===e||void 0===e?void 0:e.name)&&Object(g.jsx)("div",{children:Object(g.jsxs)(O.a.Group,{as:x.a,md:"12",controlId:"validationCustomUsername",children:[Object(g.jsx)(O.a.Label,{children:null===e||void 0===e?void 0:e.name}),Object(g.jsxs)(w.a,{hasValidation:!0,children:[Object(g.jsx)(O.a.Control,{id:null===e||void 0===e?void 0:e.name,type:null===e||void 0===e?void 0:e.type,placeholder:"Enter ".concat(null===e||void 0===e?void 0:e.name),required:!0}),Object(g.jsx)(O.a.Control.Feedback,{type:"invalid",children:"Please enter ".concat(null===e||void 0===e?void 0:e.name)})]})]})})})),Object(g.jsx)(j.a,{className:"m-2",type:"submit",children:"Add"}),Object(g.jsx)(j.a,{className:"m-2",variant:"secondary",onClick:t,children:"Cancel"})]})})]})},y=function(e){var n=e.show,t=e.handleClose,o=e.handleAdd,l=Object(a.useState)(!1),i=Object(u.a)(l,2),r=i[0],d=i[1];return Object(g.jsxs)(b.a,{show:n,onHide:t,children:[Object(g.jsx)(b.a.Header,{closeButton:!0,children:Object(g.jsx)(b.a.Title,{children:"Add Column"})}),Object(g.jsx)(b.a.Body,{children:Object(g.jsxs)(O.a,{noValidate:!0,validated:r,onSubmit:function(e){var n=e.currentTarget;e.preventDefault(),e.stopPropagation(),n.checkValidity()&&o(),d(!0)},children:[Object(g.jsx)("div",{children:Object(g.jsxs)(O.a.Group,{as:x.a,md:"12",controlId:"validationCustomUsername",children:[Object(g.jsx)(O.a.Label,{children:"Column Name"}),Object(g.jsxs)(w.a,{hasValidation:!0,children:[Object(g.jsx)(O.a.Control,{id:"ColumnName",type:"string",placeholder:"Enter Column Name",required:!0}),Object(g.jsx)(O.a.Control.Feedback,{type:"invalid",children:"Please enter Column Name"})]}),Object(g.jsx)(O.a.Label,{children:"Column DataType"}),Object(g.jsxs)(w.a,{hasValidation:!0,children:[Object(g.jsxs)(O.a.Select,{"aria-label":"Default select example",id:"type",required:!0,children:[Object(g.jsx)("option",{value:"string",children:"String"}),Object(g.jsx)("option",{value:"date",children:"Date"}),Object(g.jsx)("option",{value:"number",children:"Number"})]}),Object(g.jsx)(O.a.Control.Feedback,{type:"invalid",children:"Please select Column Data Type"})]})]})}),Object(g.jsx)(j.a,{className:"m-2",type:"submit",children:"Add Column"}),Object(g.jsx)(j.a,{className:"m-2",variant:"secondary",onClick:t,children:"Cancel"})]})})]})};var D=function(){var e,n,t,o=Object(a.useState)([]),l=Object(u.a)(o,2),i=l[0],d=l[1],h=Object(a.useState)({userGroup:"superUser",originalData:null,originalId:-1}),b=Object(u.a)(h,2),O=b[0],x=b[1],w={"X-CSRFToken":function(e){for(var n=e+"=",t=document.cookie.split(";"),a=0;a<t.length;a++){for(var o=t[a];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(n))return o.substring(n.length,o.length)}return null}("csrftoken")},D=Object(a.useState)(null),S=Object(u.a)(D,2),k=S[0],N=S[1],I=Object(a.useState)(null),E=Object(u.a)(I,2),A=(E[0],E[1]),B=Object(a.useState)(!1),T=Object(u.a)(B,2),V=T[0],G=T[1],L=Object(a.useState)(!1),F=Object(u.a)(L,2),H=F[0],J=F[1],P=Object(a.useState)(!1),R=Object(u.a)(P,2),U=R[0],M=R[1],q=Object(a.useState)(!1),W=Object(u.a)(q,2),X=W[0],_=W[1],z=function(e,n){return e.findIndex((function(e){return e.id===n}))},K=function(){var e=Object(s.a)(c.a.mark((function e(n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.patch("".concat(m,"consultant/").concat(null===O||void 0===O?void 0:O.originalId,"/"),n,{headers:w});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Q=function(){var e=Object(s.a)(c.a.mark((function e(n){var t,a,o,l,i,r,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(n),console.log("onCellValueChanged: "+n.colDef.field+" = "+n.newValue),!n.data.id){e.next=10;break}return-1!==(r=z(null===O||void 0===O||null===(t=O.originalData)||void 0===t?void 0:t.rows,n.data.id))&&(null===O||void 0===O||null===(a=O.originalData)||void 0===a||a.rows.splice(r,1)),null===O||void 0===O||null===(o=O.originalData)||void 0===o||o.rows.splice(r,0,n.data),d={id:null===O||void 0===O?void 0:O.originalId,data:JSON.stringify({columns:null===O||void 0===O||null===(l=O.originalData)||void 0===l?void 0:l.columns,rows:null===O||void 0===O||null===(i=O.originalData)||void 0===i?void 0:i.rows})},e.next=9,K(d);case 9:Y();case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Y=function(){var e=Object(s.a)(c.a.mark((function e(){var n,t,a,o,l,i,s,u,v,j;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(m,"consultant/"));case 2:return l=e.sent,e.next=5,l.json();case 5:i=e.sent,s=i,console.log(i),u=window.sessionStorage.getItem("userGroup"),i=null===(n=JSON.parse(i&&(null===(t=i[0])||void 0===t?void 0:t.data)))||void 0===n?void 0:n.rows,console.log("userGroup",u,"superUser"!==u),"superUser"!==u&&(v=u.split("_"),j=v&&v.length>0&&v[0],console.log("vendorName",u,j),i=i.filter((function(e){var n;return(null===(n=e["EDA Vendor"])||void 0===n?void 0:n.toLowerCase())===(null===j||void 0===j?void 0:j.toLowerCase())}))),d(i),x(Object(r.a)(Object(r.a)({},O),{originalData:JSON.parse(s&&(null===(a=s[0])||void 0===a?void 0:a.data)),originalId:JSON.parse(s&&(null===(o=s[0])||void 0===o?void 0:o.id))}));case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){x({userGroup:window.sessionStorage.getItem("userGroup")}),Y(),console.log(window.sessionStorage.getItem("userGroup"))}),[]);var Z=function(){M(!0)},$=function(){var e=Object(s.a)(c.a.mark((function e(){var n,t,a,o,l,i,r,d,s,u,v,j;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},null===O||void 0===O||null===(n=O.originalData)||void 0===n||n.columns.forEach((function(e){"id"!==(null===e||void 0===e?void 0:e.name)&&(r[null===e||void 0===e?void 0:e.name]=document.getElementById(null===e||void 0===e?void 0:e.name)&&document.getElementById(null===e||void 0===e?void 0:e.name).value)})),(null===O||void 0===O||null===(t=O.originalData)||void 0===t?void 0:t.rows)&&(null===O||void 0===O||null===(a=O.originalData)||void 0===a?void 0:a.rows.length)>0?r.id=(null===O||void 0===O||null===(d=O.originalData)||void 0===d||null===(s=d.rows[(null===O||void 0===O||null===(u=O.originalData)||void 0===u?void 0:u.rows.length)-1])||void 0===s?void 0:s.id)+1:r.id=1,null===O||void 0===O||null===(o=O.originalData)||void 0===o||o.rows.push(r),v={id:null===O||void 0===O?void 0:O.originalId,data:JSON.stringify({columns:null===O||void 0===O||null===(l=O.originalData)||void 0===l?void 0:l.columns,rows:null===O||void 0===O||null===(i=O.originalData)||void 0===i?void 0:i.rows})},e.next=7,K(v);case 7:j=e.sent,console.log("update",j),200===j.status&&(M(!1),Y());case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=Object(s.a)(c.a.mark((function e(){var n,t,a,o,l,i,r,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i={name:null,type:null,validations:[]}).name=document.getElementById("ColumnName")&&(null===(n=document.getElementById("ColumnName"))||void 0===n?void 0:n.value),i.type=document.getElementById("type")&&(null===(t=document.getElementById("type"))||void 0===t?void 0:t.value),null===O||void 0===O||null===(a=O.originalData)||void 0===a||a.columns.push(i),r={id:null===O||void 0===O?void 0:O.originalId,data:JSON.stringify({columns:null===O||void 0===O||null===(o=O.originalData)||void 0===o?void 0:o.columns,rows:null===O||void 0===O||null===(l=O.originalData)||void 0===l?void 0:l.rows})},e.next=7,K(r);case 7:d=e.sent,console.log("update",d),200===d.status&&(_(!1),Y());case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=Object(s.a)(c.a.mark((function e(){var n,t,a,o,l,i,r,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=k.getSelectedRows(),-1!==(r=z(null===O||void 0===O||null===(n=O.originalData)||void 0===n?void 0:n.rows,null===(t=i[0])||void 0===t?void 0:t.id))&&(null===O||void 0===O||null===(a=O.originalData)||void 0===a||a.rows.splice(r,1)),d={id:null===O||void 0===O?void 0:O.originalId,data:JSON.stringify({columns:null===O||void 0===O||null===(o=O.originalData)||void 0===o?void 0:o.columns,rows:null===O||void 0===O||null===(l=O.originalData)||void 0===l?void 0:l.rows})},e.next=6,K(d);case 6:Y(),G(!1),J(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return console.log("rowData",i,"keys",Object.keys(i.length>0&&i[0]),"pageState",null===O||void 0===O?void 0:O.originalData),Object(g.jsxs)("div",{className:"App",children:[Object(g.jsxs)("div",{children:[Object(g.jsx)(j.a,{variant:"primary",className:"m-2",onClick:Z,children:"Add Consultant"}),Object(g.jsx)(j.a,{variant:"primary",className:"m-2",onClick:function(){_(!0)},children:"Add New Column"}),H&&Object(g.jsx)(j.a,{variant:"danger",className:"m-2",onClick:function(){G(!0)},children:"Remove Consultant"}),Object(g.jsx)(j.a,{variant:"primary",className:"m-2",onClick:function(){k.exportDataAsCsv()},children:"Export to CSV"})]}),Object(g.jsx)(f,{show:V,handleClose:function(){return G(!1)},handleDelete:ne,handleAdd:Z}),Object(g.jsx)(C,{show:U,handleClose:function(){return M(!1)},handleAdd:$,columns:null===O||void 0===O||null===(e=O.originalData)||void 0===e?void 0:e.columns}),Object(g.jsx)(y,{show:X,handleClose:function(){return _(!1)},handleAdd:ee}),Object(g.jsx)("div",{className:"ag-theme-alpine",style:{width:"100%",height:"1000px"},children:Object(g.jsx)(v.AgGridReact,{components:{actionCellRenderer:function(e){var n=document.createElement("span"),t=document.createElement("button");t.innerHTML="Edit",t.className="btn btn-primary",t.onclick=function(){alert("Button is clicked")};var a=document.createElement("button"),o=e.api.getEditingCells().some((function(n){return n.rowIndex===e.node.rowIndex}));if(o){var l=document.createElement("button");l.innerHTML="Cancel",l.className="btn btn-secondary",l.onclick=function(){alert("Button is clicked")},t.innerHTML="Update"}return n.appendChild(t),o&&n.appendChild(a),n}},defaultColDef:{flex:1,minWidth:200,filter:!0,editable:!0},rowData:i,onGridReady:function(e){N(e.api),A(e.columnApi)},onCellValueChanged:Q,rowSelection:"single",onSelectionChanged:function(){var e=k.getSelectedRows();e&&e.length>0&&J(!0)},suppressExcelExport:!0,children:null===O||void 0===O||null===(n=O.originalData)||void 0===n||null===(t=n.columns)||void 0===t?void 0:t.map((function(e){return Object(g.jsx)(v.AgGridColumn,{field:null===e||void 0===e?void 0:e.name,pinned:"id"===(null===e||void 0===e?void 0:e.name)||"Consultant Name"===(null===e||void 0===e?void 0:e.name)?"left":null})}))})})]})},S=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,112)).then((function(n){var t=n.getCLS,a=n.getFID,o=n.getFCP,l=n.getLCP,i=n.getTTFB;t(e),a(e),o(e),l(e),i(e)}))};t(106);i.a.render(Object(g.jsx)(o.a.StrictMode,{children:Object(g.jsx)(D,{})}),document.getElementById("root")),S()},57:function(e,n,t){},86:function(e,n,t){}},[[107,1,2]]]);
//# sourceMappingURL=main.chunk.js.map